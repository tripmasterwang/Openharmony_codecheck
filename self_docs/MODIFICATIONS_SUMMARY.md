# é¡¹ç›®ä¿®æ”¹æ€»ç»“

## ä¿®æ”¹ç›®æ ‡ âœ…

1. âœ… **å¢é‡å¼ä¿®æ”¹**ï¼šä¿ç•™æ‰€æœ‰åŸæœ‰åŠŸèƒ½ï¼Œæ–°å¢ OpenHarmony æ”¯æŒ
2. âœ… **æ–°å¢å‘½ä»¤**ï¼š`mini-extra openharmony-single`
3. âœ… **çŸ­è·¯åŠ¨æ€æ£€æŸ¥**ï¼šåªè¿›è¡Œé™æ€ä»£ç åˆ†æï¼Œä¸è¿è¡Œä»£ç 

## ä¿®æ”¹æ–‡ä»¶æ¸…å•

### 1. æ–°å¢æ–‡ä»¶

#### `/src/minisweagent/run/extra/openharmony_single.py` (æ–°å»º)
- ä¸»è¦åŠŸèƒ½ï¼šå¤„ç†å•ä¸ª OpenHarmony ä»£ç è´¨é‡é—®é¢˜
- æ ¸å¿ƒé€»è¾‘ï¼š
  - `load_openharmony_dataset()`: ä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½æ•°æ®é›†
  - `format_openharmony_issue()`: å°† JSON æ ¼å¼è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€ä»»åŠ¡æè¿°
  - `main()`: å‘½ä»¤è¡Œå…¥å£ï¼Œä½¿ç”¨ `LocalEnvironment` è€Œé Docker

#### `/src/minisweagent/config/extra/openharmony.yaml` (æ–°å»º)
- ä¸»è¦åŠŸèƒ½ï¼šOpenHarmony ä¸“ç”¨é…ç½®
- æ ¸å¿ƒç‰¹ç‚¹ï¼š
  - å¼ºè°ƒ**é™æ€åˆ†æ**ï¼ˆSTATIC CODE ANALYSIS ONLYï¼‰
  - æ˜ç¡®ç¦æ­¢è¿è¡Œä»£ç å’Œåˆ›å»ºæµ‹è¯•è„šæœ¬
  - ç®€åŒ–å·¥ä½œæµç¨‹ï¼Œç§»é™¤åŠ¨æ€éªŒè¯æ­¥éª¤
  - é™åˆ¶èµ„æºæ¶ˆè€—ï¼šstep_limit=100, cost_limit=2.0

#### `/OPENHARMONY_USAGE.md` (æ–°å»º)
- å®Œæ•´çš„ä½¿ç”¨è¯´æ˜æ–‡æ¡£
- åŒ…å«ç¤ºä¾‹ã€å¯¹æ¯”ã€æ•…éšœæ’æŸ¥ç­‰

#### `/MODIFICATIONS_SUMMARY.md` (æœ¬æ–‡ä»¶)
- ä¿®æ”¹æ€»ç»“

### 2. ä¿®æ”¹æ–‡ä»¶

#### `/src/minisweagent/run/mini_extra.py` (ä¿®æ”¹)
- **ä¿®æ”¹ä½ç½®**ï¼šç¬¬ 8-14 è¡Œï¼Œ`subcommands` åˆ—è¡¨
- **ä¿®æ”¹å†…å®¹**ï¼šæ–°å¢ä¸€è¡Œ
  ```python
  ("minisweagent.run.extra.openharmony_single", ["openharmony-single"], "Evaluate on OpenHarmony (single instance)"),
  ```
- **å½±å“**ï¼šæ³¨å†Œæ–°å‘½ä»¤åˆ°å‘½ä»¤è¡Œå·¥å…·

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```bash
mini-extra openharmony-single \
    --subset dataset1 \
    --split test \
    --model anthropic/claude-sonnet-4-5-20250929 \
    -i openharmony__vendor_telink-0
```

### ä¸ SWE-bench å¯¹æ¯”

```bash
# SWE-bench (åŸæœ‰åŠŸèƒ½ï¼Œä¿æŒä¸å˜)
mini-extra swebench-single \
    --subset verified \
    --split test \
    --model anthropic/claude-sonnet-4-5-20250929 \
    -i sympy__sympy-15599

# OpenHarmony (æ–°å¢åŠŸèƒ½)
mini-extra openharmony-single \
    --subset dataset1 \
    --split test \
    --model anthropic/claude-sonnet-4-5-20250929 \
    -i openharmony__vendor_telink-0
```

## æŠ€æœ¯å®ç°å¯¹æ¯”

| ç‰¹æ€§ | SWE-bench | OpenHarmony |
|-----|-----------|-------------|
| ç¯å¢ƒ | Docker (get_sb_environment) | Local (LocalEnvironment) |
| æ•°æ®æº | HuggingFace datasets | æœ¬åœ° JSON æ–‡ä»¶ |
| å·¥ä½œç›®å½• | /testbed | é¡¹ç›®å®é™…è·¯å¾„ |
| å·¥ä½œæµç¨‹ | è¯»å–â†’å¤ç°â†’ä¿®æ”¹â†’æµ‹è¯•â†’æäº¤ | è¯»å–â†’åˆ†æâ†’ä¿®æ”¹â†’æäº¤ |
| åŠ¨æ€æ£€æŸ¥ | âœ… è¿è¡Œæµ‹è¯•è„šæœ¬ | âŒ ç¦ç”¨ï¼ˆçŸ­è·¯ï¼‰ |
| æ­¥æ•°é™åˆ¶ | 250 | 100 |
| æˆæœ¬é™åˆ¶ | $3.0 | $2.0 |

## ä»£ç è´¨é‡ä¿è¯

- âœ… æ—  linter é”™è¯¯
- âœ… éµå¾ªé¡¹ç›®ä»£ç é£æ ¼ï¼ˆPython 3.10+, type hintsï¼‰
- âœ… ç¬¦åˆé¡¹ç›®æ¶æ„ï¼ˆProtocol, dataclassï¼‰
- âœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡

## æµ‹è¯•ç»“æœ

```bash
# 1. å‘½ä»¤æ³¨å†ŒæˆåŠŸ
$ mini-extra --help
...
  openharmony-single: Evaluate on OpenHarmony (single instance)

# 2. å‘½ä»¤å‚æ•°æ­£ç¡®
$ mini-extra openharmony-single --help
...æ˜¾ç¤ºå®Œæ•´å‚æ•°è¯´æ˜...

# 3. æ•°æ®åŠ è½½æµ‹è¯•
æˆåŠŸåŠ è½½ 107 ä¸ª issues
å®ä¾‹ ID æ ¼å¼: openharmony__vendor_telink-0 åˆ° openharmony__vendor_telink-106
æ”¯æŒä¸­æ–‡å­—æ®µåçš„çœŸå®æ•°æ®æ ¼å¼
```

## å…³é”®è®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆä½¿ç”¨ LocalEnvironmentï¼Ÿ
- OpenHarmony æ•°æ®é›†å·²ç»åœ¨æœ¬åœ°
- ä¸éœ€è¦ Docker éš”ç¦»ï¼ˆåªè¯»å–å’Œä¿®æ”¹æ–‡ä»¶ï¼‰
- æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦

### 2. å¦‚ä½•å®ç°"çŸ­è·¯åŠ¨æ€æ£€æŸ¥"ï¼Ÿ
- åœ¨ `openharmony.yaml` é…ç½®ä¸­æ˜ç¡®æŒ‡ç¤ºï¼š
  - "DO NOT run or execute the code"
  - "DO NOT create test scripts"
- ä¿®æ”¹æ¨èå·¥ä½œæµç¨‹ï¼Œç§»é™¤"è¿è¡ŒéªŒè¯"æ­¥éª¤
- ä¾èµ– LLM çš„é™æ€åˆ†æèƒ½åŠ›

### 3. å®ä¾‹ ID æ ¼å¼è®¾è®¡
- æ ¼å¼ï¼š`openharmony__<é¡¹ç›®å>-<issue_id>`
- ä¸ SWE-bench ä¿æŒä¸€è‡´ï¼š`<org>__<repo>-<id>`
- ä¾¿äºè¯†åˆ«å’Œç®¡ç†

## å‘åå…¼å®¹æ€§

âœ… **å®Œå…¨å‘åå…¼å®¹**
- æ‰€æœ‰åŸæœ‰å‘½ä»¤ä¿æŒä¸å˜
- æ‰€æœ‰åŸæœ‰é…ç½®æ–‡ä»¶æœªä¿®æ”¹
- åªæ–°å¢äº†æ–°æ–‡ä»¶ï¼Œæ²¡æœ‰è¦†ç›–ä»»ä½•ç°æœ‰åŠŸèƒ½

## æ–‡ä»¶ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|-----|------|------|
| æ–°å¢æ–‡ä»¶ | 4 | openharmony_single.py, openharmony.yaml, 2ä¸ªæ–‡æ¡£ |
| ä¿®æ”¹æ–‡ä»¶ | 1 | mini_extra.py (ä»…1è¡Œæ–°å¢) |
| åˆ é™¤æ–‡ä»¶ | 0 | æ—  |
| ä»£ç è¡Œæ•° | ~500 | åŒ…å«æ³¨é‡Šå’Œæ–‡æ¡£ |

## åç»­å¯èƒ½çš„æ”¹è¿›

1. **æ‰¹é‡å¤„ç†**ï¼šæ·»åŠ  `openharmony` å‘½ä»¤ï¼ˆç±»ä¼¼ `swebench`ï¼‰
2. **æ›´å¤šé¡¹ç›®**ï¼šæ‰©å±•åˆ°å…¶ä»– OpenHarmony å­é¡¹ç›®
3. **è‡ªåŠ¨è¯„ä¼°**ï¼šå®ç°è§„åˆ™ç¬¦åˆæ€§è‡ªåŠ¨æ£€æŸ¥
4. **å¯è§†åŒ–**ï¼šé›†æˆåˆ° inspector æŸ¥çœ‹è½¨è¿¹

## æ•°æ®æ ¼å¼é€‚é…

åˆå§‹å®ç°åå‘ç°çœŸå®æ•°æ®ä½¿ç”¨**ä¸­æ–‡å­—æ®µå**ï¼Œå·²å®Œæˆé€‚é…ï¼š

| å­—æ®µç”¨é€” | è‹±æ–‡ï¼ˆå‡è®¾ï¼‰ | ä¸­æ–‡ï¼ˆå®é™…ï¼‰ | ä»£ç å¤„ç† |
|---------|------------|------------|---------|
| æ–‡ä»¶è·¯å¾„ | `issue_file` | `æ–‡ä»¶è·¯å¾„` | `.get("æ–‡ä»¶è·¯å¾„", ...)` |
| è§„åˆ™ | `rule_id` | `è§„èŒƒ` | `.get("è§„èŒƒ", ...)` |
| æè¿° | `description` | `ç¼ºé™·æè¿°` | `.get("ç¼ºé™·æè¿°", ...)` |
| è¡Œå· | `line_no` | `ä»£ç è¡Œæ•°` | `.get("ä»£ç è¡Œæ•°", ...)` |
| ä»£ç  | `code` | `åˆ›å»ºæ—¶é—´` | `.get("åˆ›å»ºæ—¶é—´", ...)` |
| ä¸¥é‡ç¨‹åº¦ | `error_level` | `é—®é¢˜çº§åˆ«` | `.get("é—®é¢˜çº§åˆ«", ...)` |

**å…³é”®ç‚¹**ï¼š
- ä½¿ç”¨ `.get()` æ–¹æ³•åŒæ—¶æ”¯æŒä¸­è‹±æ–‡å­—æ®µå
- å®ä¾‹ ID åŸºäºåˆ—è¡¨ç´¢å¼•ï¼ˆ0-basedï¼‰ï¼Œè€ŒéåŸå§‹ index å­—æ®µï¼ˆ1-basedï¼‰
- 107 ä¸ªä»£ç è´¨é‡é—®é¢˜æˆåŠŸåŠ è½½

è¯¦è§ï¼š`ADAPTATION_NOTES.md`

## æ€»ç»“

æœ¬æ¬¡ä¿®æ”¹æˆåŠŸå®ç°äº†ï¼š
- âœ… å¢é‡å¼åŠŸèƒ½æ‰©å±•ï¼ˆéè¦†ç›–ï¼‰
- âœ… OpenHarmony ä»£ç è´¨é‡é—®é¢˜ä¿®å¤æ”¯æŒ
- âœ… é™æ€åˆ†æä¼˜å…ˆï¼ˆçŸ­è·¯åŠ¨æ€æ£€æŸ¥ï¼‰
- âœ… ä¸ç°æœ‰æ¶æ„æ— ç¼é›†æˆ
- âœ… ä¿æŒä»£ç è´¨é‡å’Œé£æ ¼ä¸€è‡´æ€§
- âœ… çœŸå®æ•°æ®æ ¼å¼é€‚é…ï¼ˆä¸­æ–‡å­—æ®µåï¼‰

å¯ä»¥ç«‹å³ä½¿ç”¨ï¼ğŸ‰


